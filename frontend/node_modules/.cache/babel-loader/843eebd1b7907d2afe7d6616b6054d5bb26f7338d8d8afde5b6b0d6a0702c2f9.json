{"ast":null,"code":"import{React,createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);useEffect(()=>{fetch('  https://e-commerce-pi-gules-99.vercel.app//allproducts').then(resp=>resp.json()).then(data=>setAll_Product(data));if(localStorage.getItem('auth-token')){fetch('  https://e-commerce-pi-gules-99.vercel.app//getcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:\"\"}).then(resp=>resp.json()).then(data=>setAll_Product(data));}},[]);const[cartItems,setCartItems]=useState(getDefaultCart);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem('auth-token')){fetch('  https://e-commerce-pi-gules-99.vercel.app//addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(resp=>resp.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem('auth-token')){fetch('  https://e-commerce-pi-gules-99.vercel.app//removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':\"\".concat(localStorage.getItem('auth-token')),'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(resp=>resp.json()).then(data=>console.log(data));}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));totalAmount+=itemInfo.new_price*cartItems[item];}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","fetch","then","resp","json","data","localStorage","getItem","method","headers","Accept","concat","body","cartItems","setCartItems","addToCart","itemId","prev","JSON","stringify","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/singa/OneDrive/Desktop/E-commerce/frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import { React, createContext, useEffect, useState } from \"react\"\r\n\r\n\r\n\r\nexport const ShopContext = createContext(null)\r\n\r\nconst getDefaultCart = () => {\r\n    let cart = {}\r\n    for (let index = 0; index < 300 + 1; index++) {\r\n        cart[index] = 0;\r\n    }\r\n    return cart\r\n\r\n}\r\n\r\nconst ShopContextProvider = (props) => {\r\n    const [all_product, setAll_Product] = useState([])\r\n\r\n    useEffect(() => {\r\n        fetch('  https://e-commerce-pi-gules-99.vercel.app//allproducts')\r\n            .then((resp) => resp.json())\r\n            .then((data) => setAll_Product(data))\r\n\r\n            if(localStorage.getItem('auth-token')){\r\n                fetch('  https://e-commerce-pi-gules-99.vercel.app//getcart',{\r\n                    method:'POST',\r\n                    headers:{\r\n                        Accept:'application/form-data',\r\n                        'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                        'Content-Type':'application/json'\r\n                    },\r\n                    body:\"\",\r\n                })\r\n                .then((resp)=>resp.json())\r\n                .then((data)=>setAll_Product(data))\r\n                \r\n            }\r\n    }, [])\r\n\r\n    const [cartItems, setCartItems] = useState(getDefaultCart)\r\n\r\n\r\n    const addToCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }))\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('  https://e-commerce-pi-gules-99.vercel.app//addtocart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body:JSON.stringify({\"itemId\":itemId})\r\n            })\r\n            .then((resp)=>resp.json())\r\n            .then((data)=>console.log(data))\r\n        }\r\n    }\r\n\r\n    const removeFromCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }))\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('  https://e-commerce-pi-gules-99.vercel.app//removefromcart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body:JSON.stringify({\"itemId\":itemId})\r\n            })\r\n            .then((resp)=>resp.json())\r\n            .then((data)=>console.log(data))\r\n        }\r\n    }\r\n\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for (const item in cartItems) {\r\n            if (cartItems[item] > 0) {\r\n                let itemInfo = all_product.find((product) => product.id === Number(item));\r\n                totalAmount += itemInfo.new_price * cartItems[item];\r\n            }\r\n        }\r\n        return totalAmount;\r\n    }\r\n\r\n    const getTotalCartItems = () => {\r\n        let totalItem = 0;\r\n        for (const item in cartItems) {\r\n            if (cartItems[item] > 0) {\r\n                totalItem += cartItems[item]\r\n            }\r\n        }\r\n        return totalItem\r\n    }\r\n\r\n\r\n    const contextValue = { getTotalCartItems, getTotalCartAmount, all_product, cartItems, addToCart, removeFromCart }\r\n    return (\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    )\r\n}\r\n\r\nexport default ShopContextProvider"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}